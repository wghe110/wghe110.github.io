import{_ as e,r as o,o as c,c as l,a as n,d as t,e as p,b as s}from"./app.fd5cf31d.js";var i="/assets/config.23ae9e2c.png",u="/assets/path.d04c6194.png";const r={},k=p(`<h1 id="tinymce\u79BB\u7EBFvue3-ts\u7EC4\u4EF6\u5B9E\u73B0\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#tinymce\u79BB\u7EBFvue3-ts\u7EC4\u4EF6\u5B9E\u73B0\u8FC7\u7A0B" aria-hidden="true">#</a> tinymce\u79BB\u7EBFvue3-ts\u7EC4\u4EF6\u5B9E\u73B0\u8FC7\u7A0B</h1><p>\u672C\u6765\u60F3\u7528tinymce\u7684vue\u7248\u672C\u76F4\u63A5\u7528\u7684\uFF0C\u53EF\u662F\u5E94\u7528\u8FC7\u540E\u51FA\u73B0\u4E00\u7CFB\u5217\u7684\u95EE\u9898\uFF1A</p><ul><li>\u9700\u8981\u7533\u8BF7 api-key</li><li>\u7F51\u7EDC\u52A0\u8F7D\u8FC7\u6162</li><li>\u4F9D\u8D56\u7F51\u7EDC</li></ul><p>\u6240\u4EE5\uFF0C\u51B3\u5B9A\u914D\u7F6E\u4E00\u5957\u79BB\u7EBF\u7248\u7684tinymce\uFF01</p><h2 id="\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA4" aria-hidden="true">#</a> \u6B65\u9AA4</h2><ul><li>\u9879\u76EE\u57FA\u7840</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  vue3<span class="token operator">+</span>ts<span class="token operator">+</span>elementUI
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,7),d=s("\u7B2C\u4E00\u6B65\uFF1A\u4E0B\u8F7D\u79BB\u7EBF\u7248\u7684tinymce "),v={href:"https://www.tiny.cloud/get-tiny/self-hosted/",target:"_blank",rel:"noopener noreferrer"},m=s("https://www.tiny.cloud/get-tiny/self-hosted/"),b=s(" \u6CE8\u610F\uFF1A\u53EF\u4EE5\u4E0B\u8F7D"),y=n("code",null,"Dev",-1),g=s("\u7248\u672C\uFF0C\u4E5F\u53EF\u4EE5\u4E0B\u8F7D"),f=n("code",null,"Prod",-1),_=s("\uFF0C"),h=n("code",null,"tinymce.js",-1),w=s("\u9ED8\u8BA4\u52A0\u8F7D\u539F\u59CB\u6587\u4EF6\uFF0C\u4E0D\u52A0\u8F7D\u538B\u7F29\u8FC7\u540E"),q=n("code",null,".min",-1),x=s("\u7684\u6587\u4EF6\uFF1B "),j=n("strong",null,[s("\u5982\u679C\u8981\u4E0B\u8F7D"),n("code",null,"Dev"),s("\u7684\u8BDD\uFF0C\u9700\u8981\u6DFB\u52A0\u914D\u7F6E\u5982\u4E0B\u4EE3\u7801\uFF1A")],-1),U=n("img",{src:i,alt:"Snipaste_2022-01-14_17-42-59.png"},null,-1),D=n("li",null,[n("p",null,[s("\u7B2C\u4E8C\u6B65\uFF1A\u6574\u7406\u76EE\u5F55 \u628A\u4E0B\u9762\u7EA2\u5708\u91CC\u7684\u6587\u4EF6\u590D\u5236\u51FA\u6765\uFF0C\u653E\u5230\u9879\u76EE\u7684"),n("code",null,"/public"),s("\u76EE\u5F55\u4E0B "),n("img",{src:u,alt:"\u76EE\u5F55"})])],-1),H=s("\u7B2C\u4E09\u6B65\uFF1A\u4E0B\u8F7D\u4E2D\u6587\u5305 "),T={href:"https://www.tiny.cloud/get-tiny/language-packages/",target:"_blank",rel:"noopener noreferrer"},E=s("https://www.tiny.cloud/get-tiny/language-packages/"),I=s(" \u5E76\u628A\u4E0B\u8F7D\u597D\u7684"),N=n("code",null,"zh_CN.js",-1),S=s("\u6587\u4EF6\u653E\u5728\u9879\u76EE"),V=n("code",null,"/public/tinymce/langs/",-1),z=s("\u4E0B\u9762"),C=n("li",null,[n("p",null,[s("\u4F7F\u7528"),n("code",null,"@tinymce/tinymce-vue"),s("\u7EC4\u4EF6")])],-1),M=p(`<div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Editor</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>val<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>config<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>eid<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;/@public/tinymce/tinymce.min&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Editor <span class="token keyword">from</span> <span class="token string">&quot;@tinymce/tinymce-vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;/@public/tinymce/tinymce.d&quot;</span><span class="token punctuation">;</span>

declare global <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">tinymce</span><span class="token operator">:</span> any<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">import</span> configDefault <span class="token keyword">from</span> <span class="token string">&quot;./default-config&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> getUploadHandler <span class="token keyword">from</span> <span class="token string">&quot;./getUploadHandler&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    Editor<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">disabled</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">uploadUrl</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">init</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;update:value&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">context</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> eid <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u53CC\u5411\u7ED1\u5B9A</span>
    <span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> props<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token operator">:</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:value&quot;</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u914D\u7F6E\u5BF9\u8C61</span>
    <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>configDefault<span class="token punctuation">,</span> props<span class="token punctuation">.</span>init<span class="token punctuation">)</span><span class="token punctuation">;</span>
      obj<span class="token punctuation">.</span>images_upload_handler <span class="token operator">=</span> <span class="token function">getUploadHandler</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>uploadUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u76D1\u542Cdisabled</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>disabled<span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">val</span><span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>tinymce<span class="token punctuation">.</span>editors <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>tinymce<span class="token punctuation">.</span>editors<span class="token punctuation">[</span>eid<span class="token punctuation">]</span><span class="token punctuation">)</span>
          window<span class="token punctuation">.</span>tinymce<span class="token punctuation">.</span>editors<span class="token punctuation">[</span>eid<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setMode</span><span class="token punctuation">(</span>val <span class="token operator">?</span> <span class="token string">&quot;readonly&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;design&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>tinymce<span class="token punctuation">.</span>editors<span class="token punctuation">[</span>eid<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setMode</span><span class="token punctuation">(</span>val <span class="token operator">?</span> <span class="token string">&quot;readonly&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;design&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      val<span class="token punctuation">,</span>
      config<span class="token punctuation">,</span>
      eid<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>\u9644\u4EF6</strong>\uFF1A</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// default-config.ts</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 <span class="token literal-property property">base_url</span><span class="token operator">:</span> <span class="token string">&#39;/tinymce&#39;</span><span class="token punctuation">,</span>
 <span class="token literal-property property">suffix</span><span class="token operator">:</span> <span class="token string">&quot;.min&quot;</span><span class="token punctuation">,</span>
 <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">&quot;zh_CN&quot;</span><span class="token punctuation">,</span>
 <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
 <span class="token literal-property property">menubar</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

 <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token string">&quot;quickbars lists paste table link image&quot;</span><span class="token punctuation">,</span>
 <span class="token literal-property property">toolbar</span><span class="token operator">:</span>
   <span class="token string">&quot;link image table | cut copy paste | fontsizeselect | forecolor backcolor | bold italic underline | numlist bullist indent outdent alignjustify alignleft aligncenter alignright&quot;</span><span class="token punctuation">,</span>
 <span class="token literal-property property">fontsize_formats</span><span class="token operator">:</span>
   <span class="token string">&quot;8px 10px 12px 14pt 16px 18px 20px 22px 24px 26px 28px 30px 36px&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// getUploadHandler.ts</span>
<span class="token keyword">const</span> getUploadHandler <span class="token operator">=</span> <span class="token punctuation">(</span>uploadUrl<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">any</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token parameter"><span class="token literal-property property">blobInfo</span><span class="token operator">:</span> any<span class="token punctuation">,</span>
    <span class="token literal-property property">success</span><span class="token operator">:</span> any<span class="token punctuation">,</span>
    <span class="token literal-property property">failure</span><span class="token operator">:</span> any<span class="token punctuation">,</span>
    <span class="token literal-property property">progress</span><span class="token operator">:</span> any</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">let</span> <span class="token literal-property property">xhr</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">formData</span><span class="token operator">:</span> any<span class="token punctuation">;</span>
    xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> uploadUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>

    xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">e</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">progress</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>loaded <span class="token operator">/</span> e<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> json<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">failure</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP Error: &quot;</span> <span class="token operator">+</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">remove</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">200</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">failure</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP Error: &quot;</span> <span class="token operator">+</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> url <span class="token operator">=</span> json<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>json <span class="token operator">||</span> <span class="token keyword">typeof</span> url <span class="token operator">!=</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">failure</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid JSON: &quot;</span> <span class="token operator">+</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">success</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">failure</span><span class="token punctuation">(</span>
        <span class="token string">&quot;Image upload failed due to a XHR Transport error. Code: &quot;</span> <span class="token operator">+</span>
        xhr<span class="token punctuation">.</span>status
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">,</span> blobInfo<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> blobInfo<span class="token punctuation">.</span><span class="token function">filename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> getUploadHandler
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),O={start:"5"},B=n("p",null,"\u4F18\u5316",-1),P=n("li",null,"\u81EA\u52A8\u5237\u65B0",-1),L=s("\u66F4\u591A\u914D\u7F6E\uFF1A"),J={href:"http://tinymce.ax-z.cn/",target:"_blank",rel:"noopener noreferrer"},R=s("http://tinymce.ax-z.cn/"),X=n("p",null,"\u53C2\u8003\u8D44\u6599",-1),F={href:"https://www.tiny.cloud/docs/quick-start/",target:"_blank",rel:"noopener noreferrer"},W=s("https://www.tiny.cloud/docs/quick-start/"),A={href:"https://blog.csdn.net/feixiangsmile/article/details/100129218",target:"_blank",rel:"noopener noreferrer"},G=s("https://blog.csdn.net/feixiangsmile/article/details/100129218"),K={href:"https://segmentfault.com/a/1190000012791569",target:"_blank",rel:"noopener noreferrer"},Q=s("https://segmentfault.com/a/1190000012791569");function Y(Z,$){const a=o("ExternalLinkIcon");return c(),l("div",null,[k,n("ol",null,[n("li",null,[n("p",null,[d,n("a",v,[m,t(a)]),b,y,g,f,_,h,w,q,x,j,U])]),D,n("li",null,[n("p",null,[H,n("a",T,[E,t(a)]),I,N,S,V,z])]),C]),M,n("ol",O,[n("li",null,[B,n("ul",null,[P,n("li",null,[L,n("a",J,[R,t(a)])])])]),n("li",null,[X,n("ul",null,[n("li",null,[n("a",F,[W,t(a)])]),n("li",null,[n("a",A,[G,t(a)])]),n("li",null,[n("a",K,[Q,t(a)])])])])])])}var sn=e(r,[["render",Y],["__file","tinymce-vue3.html.vue"]]);export{sn as default};
